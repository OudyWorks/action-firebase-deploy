# Copyright 2020 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

name: "Deploy to Firebase (All Resources)"
description: "Deploys Firebase. Defaults to all resources; set targets to limit. Creates Hosting preview channels for PRs."
author: "Jason Miller (https://github.com/developit) and Firebase and Ayoub Oudmane (https://github.com/oudmane)"
branding:
  icon: "globe"
  color: "blue"
runs:
  using: "node24"
  main: "bin/action.min.js"
inputs:
  repoToken:
    description: "The GITHUB_TOKEN secret"
    required: false
  firebaseServiceAccount:
    description: "Firebase service account JSON"
    required: false
  firebaseToken:
    description: >-
      Firebase CI token (used with --token). Provide this when not using a service account.
    required: false
  expires:
    description: "How long should a preview live? See the preview channels docs for options"
    default: "7d"
    required: false
  projectId:
    description:
      "The project to deploy to. If you leave this blank, make sure you check in
      a .firebaserc file"
    required: false
  channelId:
    description: "The ID of the channel to deploy to. If you leave this blank,
      a preview channel and its ID will be auto-generated per branch or PR."
    required: false
  targets:
    description: >-
      Optional list of Firebase deploy targets to pass to the CLI via `--only`.
      Provide as a multiline input. When set, the action runs `firebase deploy --only <targets>`.
      When omitted, the action runs `firebase deploy` (deploys all configured resources) for production,
      and `firebase hosting:channel:deploy` for previews.
    required: false
  entryPoint:
    description:
      "The location of your firebase.json file, relative to the root of your
      directory"
    default: "."
    required: false
  config:
    description: >-
      The Firebase config file to use (passed as --config). Relative to entryPoint.
    default: firebase.json
    required: false
  firebaseToolsVersion:
    description: >-
      The version of firebase-tools to use. Defaults to `latest`.
    default: latest
    required: false
  disableComment:
    description: >-
      Disable auto-commenting with the preview channel URL to the pull request
    default: "false"
    required: false
outputs:
  urls:
    description: The url(s) deployed to
  expire_time:
    description: The time the deployed preview urls expire
  expire_time_formatted:
    description: The time the deployed preview urls expire in the UTC format
  details_url:
    description: A single URL that was deployed to
